{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/genkit.ts"],"sourcesContent":["import {genkit} from 'genkit';\nimport {googleAI} from '@genkit-ai/google-genai';\n\nexport const ai = genkit({\n  plugins: [googleAI()],\n  model: 'googleai/gemini-2.5-flash',\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAEO,MAAM,KAAK,CAAA,GAAA,uIAAA,CAAA,SAAM,AAAD,EAAE;IACvB,SAAS;QAAC,CAAA,GAAA,6KAAA,CAAA,WAAQ,AAAD;KAAI;IACrB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/book-recommendations.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview Provides book recommendations based on user's viewed and reviewed books.\n *\n * - getBookRecommendations - A function to retrieve book recommendations.\n * - BookRecommendationsInput - The input type for the getBookRecommendations function.\n * - BookRecommendationsOutput - The return type for the getBookRecommendations function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst BookRecommendationsInputSchema = z.object({\n  viewedBooks: z.array(\n    z.object({\n      title: z.string().describe('Title of the viewed book.'),\n      author: z.string().describe('Author of the viewed book.'),\n      genre: z.string().describe('Genre of the viewed book.'),\n      description: z.string().describe('Description of the viewed book.'),\n    })\n  ).optional().describe('List of books the user has viewed.'),\n  reviewedBooks: z.array(\n    z.object({\n      title: z.string().describe('Title of the reviewed book.'),\n      author: z.string().describe('Author of the reviewed book.'),\n      genre: z.string().describe('Genre of the reviewed book.'),\n      description: z.string().describe('Description of the reviewed book.'),\n      rating: z.number().describe('Rating given to the book by the user.'),\n      reviewText: z.string().describe('Text review of the book by the user.'),\n    })\n  ).optional().describe('List of books the user has reviewed.'),\n});\n\nexport type BookRecommendationsInput = z.infer<typeof BookRecommendationsInputSchema>;\n\nconst BookRecommendationsOutputSchema = z.object({\n  recommendations: z.array(\n    z.object({\n      title: z.string().describe('Title of the recommended book.'),\n      author: z.string().describe('Author of the recommended book.'),\n      genre: z.string().describe('Genre of the recommended book.'),\n      description: z.string().describe('Description of the recommended book.'),\n    })\n  ).describe('List of recommended books based on viewed and reviewed books.'),\n});\n\nexport type BookRecommendationsOutput = z.infer<typeof BookRecommendationsOutputSchema>;\n\nexport async function getBookRecommendations(input: BookRecommendationsInput): Promise<BookRecommendationsOutput> {\n  return bookRecommendationsFlow(input);\n}\n\nconst bookRecommendationsPrompt = ai.definePrompt({\n  name: 'bookRecommendationsPrompt',\n  input: {schema: BookRecommendationsInputSchema},\n  output: {schema: BookRecommendationsOutputSchema},\n  prompt: `You are a book recommendation expert. Based on the books the user has viewed and reviewed, you will provide a list of recommended books that the user might enjoy.\n\n  Here are the books the user has viewed:\n  {{#if viewedBooks}}\n    {{#each viewedBooks}}\n      - Title: {{this.title}}, Author: {{this.author}}, Genre: {{this.genre}}\n    {{/each}}\n  {{else}}\n    The user has not viewed any books.\n  {{/if}}\n\n  Here are the books the user has reviewed:\n  {{#if reviewedBooks}}\n    {{#each reviewedBooks}}\n      - Title: {{this.title}}, Author: {{this.author}}, Genre: {{this.genre}}, Rating: {{this.rating}}, Review: {{this.reviewText}}\n    {{/each}}\n  {{else}}\n    The user has not reviewed any books.\n  {{/if}}\n\n  Please provide a list of 3 recommended books with their title, author, and genre in JSON format.  Do not recommend books that the user has already viewed or reviewed.\n  Ensure that the recommendations are diverse and cover a range of interests based on the user's preferences.\n  `,config: {\n    safetySettings: [\n      {\n        category: 'HARM_CATEGORY_DANGEROUS_CONTENT',\n        threshold: 'BLOCK_ONLY_HIGH',\n      },\n      {\n        category: 'HARM_CATEGORY_HATE_SPEECH',\n        threshold: 'BLOCK_ONLY_HIGH',\n      },\n    ],\n  }\n});\n\nconst bookRecommendationsFlow = ai.defineFlow(\n  {\n    name: 'bookRecommendationsFlow',\n    inputSchema: BookRecommendationsInputSchema,\n    outputSchema: BookRecommendationsOutputSchema,\n  },\n  async input => {\n    const {output} = await bookRecommendationsPrompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;AAEA;;;;;;CAMC,GAED;AACA;AAAA;;;;;;AAEA,MAAM,iCAAiC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC9C,aAAa,uIAAA,CAAA,IAAC,CAAC,KAAK,CAClB,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACP,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC3B,QAAQ,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC5B,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC3B,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IACnC,IACA,QAAQ,GAAG,QAAQ,CAAC;IACtB,eAAe,uIAAA,CAAA,IAAC,CAAC,KAAK,CACpB,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACP,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC3B,QAAQ,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC5B,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC3B,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QACjC,QAAQ,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC5B,YAAY,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IAClC,IACA,QAAQ,GAAG,QAAQ,CAAC;AACxB;AAIA,MAAM,kCAAkC,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC/C,iBAAiB,uIAAA,CAAA,IAAC,CAAC,KAAK,CACtB,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;QACP,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC3B,QAAQ,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC5B,OAAO,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC3B,aAAa,uIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ,CAAC;IACnC,IACA,QAAQ,CAAC;AACb;AAIO,eAAe,uBAAuB,KAA+B;IAC1E,OAAO,wBAAwB;AACjC;AAEA,MAAM,4BAA4B,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IAChD,MAAM;IACN,OAAO;QAAC,QAAQ;IAA8B;IAC9C,QAAQ;QAAC,QAAQ;IAA+B;IAChD,QAAQ,CAAC;;;;;;;;;;;;;;;;;;;;;;EAsBT,CAAC;IAAC,QAAQ;QACR,gBAAgB;YACd;gBACE,UAAU;gBACV,WAAW;YACb;YACA;gBACE,UAAU;gBACV,WAAW;YACb;SACD;IACH;AACF;AAEA,MAAM,0BAA0B,mHAAA,CAAA,KAAE,CAAC,UAAU,CAC3C;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAM;IACJ,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM,0BAA0B;IACjD,OAAO;AACT;;;IArDoB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/actions.ts"],"sourcesContent":["\"use server\";\n\nimport { getBookRecommendations, type BookRecommendationsInput } from \"@/ai/flows/book-recommendations\";\n\nexport async function handleGetRecommendations(input: BookRecommendationsInput) {\n    try {\n        const result = await getBookRecommendations(input);\n        return result;\n    } catch (error) {\n        console.error(\"Error fetching book recommendations:\", error);\n        return { recommendations: [] };\n    }\n}\n"],"names":[],"mappings":";;;;;AAEA;;;;;AAEO,eAAe,yBAAyB,KAA+B;IAC1E,IAAI;QACA,MAAM,SAAS,MAAM,CAAA,GAAA,6IAAA,CAAA,yBAAsB,AAAD,EAAE;QAC5C,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,wCAAwC;QACtD,OAAO;YAAE,iBAAiB,EAAE;QAAC;IACjC;AACJ;;;IARsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 433, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/books/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {handleGetRecommendations as '40db09e6dfdfdbe4641e0d1196528f8727be777798'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 485, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/data.ts"],"sourcesContent":["\nimport type { User, Book, Review } from './definitions';\n\nexport let users: User[] = [\n  { id: '1', name: 'Alice Johnson', username: 'alicej', email: 'alice@example.com', country: 'USA', profilePhoto: `https://api.dicebear.com/8.x/initials/svg?seed=Alice%20Johnson` },\n  { id: '2', name: 'Bob Smith', username: 'bobsmith', email: 'bob@example.com', country: 'Canada', profilePhoto: '' },\n  { id: '3', name: 'Charlie Brown', username: 'charlieb', email: 'charlie@example.com', country: 'UK', profilePhoto: '' },\n];\n\nexport let books: Book[] = [\n  {\n    id: '1',\n    title: 'The Great Gatsby',\n    author: 'F. Scott Fitzgerald',\n    description: 'A novel about the American dream.',\n    genre: 'Fiction',\n    year: 1925,\n    addedBy: '1',\n    coverImage: 'https://picsum.photos/seed/book1/400/600',\n  },\n  {\n    id: '2',\n    title: 'To Kill a Mockingbird',\n    author: 'Harper Lee',\n    description: 'A novel about racial injustice in the American South.',\n    genre: 'Fiction',\n    year: 1960,\n    addedBy: '2',\n    coverImage: 'https://picsum.photos/seed/book2/400/600',\n  },\n  {\n    id: '3',\n    title: '1984',\n    author: 'George Orwell',\n    description: 'A dystopian novel about totalitarianism.',\n    genre: 'Science Fiction',\n    year: 1949,\n    addedBy: '1',\n    coverImage: 'https://picsum.photos/seed/book3/400/600',\n  },\n  {\n    id: '4',\n    title: 'The Catcher in the Rye',\n    author: 'J.D. Salinger',\n    description: 'A novel about teenage angst and alienation.',\n    genre: 'Fiction',\n    year: 1951,\n    addedBy: '3',\n    coverImage: 'https://picsum.photos/seed/book4/400/600',\n  },\n  {\n    id: '5',\n    title: 'The Lord of the Rings',\n    author: 'J.R.R. Tolkien',\n    description: 'An epic high-fantasy novel.',\n    genre: 'Fantasy',\n    year: 1954,\n    addedBy: '2',\n    coverImage: 'https://picsum.photos/seed/book5/400/600',\n  },\n  {\n    id: '6',\n    title: 'Dune',\n    author: 'Frank Herbert',\n    description: 'A landmark science fiction novel.',\n    genre: 'Science Fiction',\n    year: 1965,\n    addedBy: '1',\n    coverImage: 'https://picsum.photos/seed/book6/400/600',\n  },\n  {\n    id: '7',\n    title: 'Sapiens: A Brief History of Humankind',\n    author: 'Yuval Noah Harari',\n    description: 'A book about the history of humankind.',\n    genre: 'Non-Fiction',\n    year: 2011,\n    addedBy: '3',\n    coverImage: 'https://picsum.photos/seed/book7/400/600',\n  },\n  {\n    id: '8',\n    title: 'Pride and Prejudice',\n    author: 'Jane Austen',\n    description: 'A classic romance novel.',\n    genre: 'Romance',\n    year: 1813,\n    addedBy: '1',\n    coverImage: 'https://picsum.photos/seed/book8/400/600',\n  },\n  {\n    id: '9',\n    title: 'The Hobbit',\n    author: 'J.R.R. Tolkien',\n    description: 'A fantasy novel and prequel to The Lord of the Rings.',\n    genre: 'Fantasy',\n    year: 1937,\n    addedBy: '2',\n    coverImage: 'https://picsum.photos/seed/book9/400/600',\n  },\n  {\n    id: '10',\n    title: 'Brave New World',\n    author: 'Aldous Huxley',\n    description: 'A dystopian novel about a future society.',\n    genre: 'Science Fiction',\n    year: 1932,\n    addedBy: '3',\n    coverImage: 'https://picsum.photos/seed/book10/400/600',\n  },\n  {\n    id: '11',\n    title: 'The Hitchhiker\\'s Guide to the Galaxy',\n    author: 'Douglas Adams',\n    description: 'A comedic science fiction series.',\n    genre: 'Science Fiction',\n    year: 1979,\n    addedBy: '1',\n    coverImage: 'https://picsum.photos/seed/book11/400/600',\n  },\n  {\n    id: '12',\n    title: 'The Martian',\n    author: 'Andy Weir',\n    description: 'A science fiction novel about an astronaut stranded on Mars.',\n    genre: 'Science Fiction',\n    year: 2011,\n    addedBy: '2',\n    coverImage: 'https://picsum.photos/seed/book12/400/600',\n  },\n  {\n    id: '13',\n    title: 'Educated: A Memoir',\n    author: 'Tara Westover',\n    description: 'A memoir about a woman who leaves her survivalist family to get an education.',\n    genre: 'Non-Fiction',\n    year: 2018,\n    addedBy: '3',\n    coverImage: 'https://picsum.photos/seed/book13/400/600',\n  },\n  {\n    id: '14',\n    title: 'The Alchemist',\n    author: 'Paulo Coelho',\n    description: 'A philosophical book about following your dreams.',\n    genre: 'Fantasy',\n    year: 1988,\n    addedBy: '1',\n    coverImage: 'https://picsum.photos/seed/book14/400/600',\n  },\n  {\n    id: '15',\n    title: 'The Girl with the Dragon Tattoo',\n    author: 'Stieg Larsson',\n    description: 'A psychological thriller.',\n    genre: 'Thriller',\n    year: 2005,\n    addedBy: '2',\n    coverImage: 'https://picsum.photos/seed/book15/400/600',\n  },\n  {\n    id: '16',\n    title: 'Gone Girl',\n    author: 'Gillian Flynn',\n    description: 'A thriller about a woman who disappears on her fifth wedding anniversary.',\n    genre: 'Thriller',\n    year: 2012,\n    addedBy: '3',\n    coverImage: 'https://picsum.photos/seed/book16/400/600',\n  },\n  {\n    id: '17',\n    title: 'The Hunger Games',\n    author: 'Suzanne Collins',\n    description: 'A dystopian novel about a televised fight to the death.',\n    genre: 'Young Adult',\n    year: 2008,\n    addedBy: '1',\n    coverImage: 'https://picsum.photos/seed/book17/400/600',\n  },\n  {\n    id: '18',\n    title: 'Harry Potter and the Sorcerer\\'s Stone',\n    author: 'J.K. Rowling',\n    description: 'The first book in the epic fantasy series.',\n    genre: 'Fantasy',\n    year: 1997,\n    addedBy: '2',\n    coverImage: 'https://picsum.photos/seed/book18/400/600',\n  },\n  {\n    id: '19',\n    title: 'Atomic Habits',\n    author: 'James Clear',\n    description: 'A self-help book about building good habits and breaking bad ones.',\n    genre: 'Self-Help',\n    year: 2018,\n    addedBy: '3',\n    coverImage: 'https://picsum.photos/seed/book19/400/600',\n  },\n  {\n    id: '20',\n    title: 'The Power of Now',\n    author: 'Eckhart Tolle',\n    description: 'A guide to spiritual enlightenment.',\n    genre: 'Self-Help',\n    year: 1997,\n    addedBy: '1',\n    coverImage: 'https://picsum.photos/seed/book20/400/600',\n  },\n];\n\nexport let reviews: Review[] = [\n  { id: '1', bookId: '1', userId: '2', rating: 5, reviewText: 'An absolute masterpiece!', createdAt: '2023-10-01' },\n  { id: '2', bookId: '1', userId: '3', rating: 4, reviewText: 'Great read, very thought-provoking.', createdAt: '2023-10-02' },\n  { id: '3', bookId: '2', userId: '1', rating: 5, reviewText: 'A timeless classic that everyone should read.', createdAt: '2023-10-03' },\n  { id: '4', bookId: '3', userId: '2', rating: 5, reviewText: 'Scarily relevant even today.', createdAt: '2023-10-04' },\n  { id: '5', bookId: '6', userId: '1', rating: 5, reviewText: 'The world-building is incredible.', createdAt: '2023-10-05' },\n  { id: '6', bookId: '6', userId: '2', rating: 4, reviewText: 'A bit dense but worth it.', createdAt: '2023-10-06' },\n  { id: '7', bookId: '7', userId: '3', rating: 5, reviewText: 'Changed the way I see the world.', createdAt: '2023-10-07' },\n  { id: '8', bookId: '8', userId: '1', rating: 5, reviewText: 'A beautiful and witty romance.', createdAt: '2023-10-08' },\n  { id: '9', bookId: '15', userId: '3', rating: 4, reviewText: 'A gripping and dark thriller.', createdAt: '2023-10-09' },\n  { id: '10', bookId: '12', userId: '2', rating: 5, reviewText: 'Science and survival at its best. Couldn\\'t put it down!', createdAt: '2023-10-10' },\n  { id: '11', bookId: '1', userId: '1', rating: 4, reviewText: 'Enjoyed it, but the ending felt a bit rushed.', createdAt: '2023-11-15' },\n  { id: '12', bookId: '2', userId: '2', rating: 5, reviewText: 'This book is a must-read for every generation.', createdAt: '2023-11-16' },\n  { id: '13', bookId: '3', userId: '3', rating: 3, reviewText: 'A powerful message, but a bit dry for my taste.', createdAt: '2023-11-17' },\n  { id: '14', bookId: '4', userId: '1', rating: 2, reviewText: 'I just couldn\\'t connect with the protagonist.', createdAt: '2023-11-18' },\n  { id: '15', bookId: '5', userId: '2', rating: 5, reviewText: 'An epic adventure that you\\'ll get lost in.', createdAt: '2023-11-19' },\n  { id: '16', bookId: '5', userId: '3', rating: 5, reviewText: 'Tolkien is a master storyteller.', createdAt: '2023-11-20' },\n  { id: '17', bookId: '7', userId: '1', rating: 4, reviewText: 'A fascinating look at human history.', createdAt: '2023-11-21' },\n  { id: '18', bookId: '8', userId: '2', rating: 4, reviewText: 'Mr. Darcy is everything!', createdAt: '2023-11-22' },\n  { id: '19', bookId: '9', userId: '3', rating: 4, reviewText: 'A charming and delightful adventure.', createdAt: '2023-11-23' },\n  { id: '20', bookId: '10', userId: '1', rating: 4, reviewText: 'A chilling vision of the future.', createdAt: '2023-11-24' },\n  { id: '21', bookId: '11', userId: '2', rating: 5, reviewText: 'Hilarious and absurd in the best way possible.', createdAt: '2023-11-25' },\n  { id: '22', bookId: '13', userId: '3', rating: 5, reviewText: 'Incredibly powerful and inspiring story.', createdAt: '2023-11-26' },\n  { id: '23', bookId: '14', userId: '1', rating: 3, reviewText: 'A bit too philosophical for my liking, but beautifully written.', createdAt: '2023-11-27' },\n  { id: '24', bookId: '16', userId: '2', rating: 5, reviewText: 'Twists and turns that will keep you on the edge of your seat!', createdAt: '2023-11-28' },\n  { id: '25', bookId: '17', userId: '3', rating: 4, reviewText: 'A thrilling read, couldn\\'t put it down.', createdAt: '2023-11-29' },\n  { id: '26', bookId: '18', userId: '1', rating: 5, reviewText: 'The book that started it all. Pure magic.', createdAt: '2023-11-30' },\n  { id: '27', bookId: '19', userId: '2', rating: 5, reviewText: 'Practical and actionable advice. Highly recommend.', createdAt: '2023-12-01' },\n  { id: '28', bookId: '20', userId: '3', rating: 4, reviewText: 'A bit repetitive, but the core message is profound.', createdAt: '2023-12-02' },\n  { id: '29', bookId: '12', userId: '1', rating: 4, reviewText: 'So much fun. Makes you want to be an astronaut.', createdAt: '2023-12-03' },\n  { id: '30', bookId: '15', userId: '1', rating: 5, reviewText: 'Lisbeth Salander is an iconic character.', createdAt: '2023-12-04' }\n];\n\n// Data access functions\nexport const getBooks = async (): Promise<Book[]> => {\n  // simulate network delay\n  await new Promise(resolve => setTimeout(resolve, 500));\n  return books;\n};\n\nexport const getBookById = async (id: string): Promise<Book | undefined> => {\n  await new Promise(resolve => setTimeout(resolve, 200));\n  return books.find(book => book.id === id);\n};\n\nexport const getReviewsForBook = async (bookId: string): Promise<Review[]> => {\n  await new Promise(resolve => setTimeout(resolve, 300));\n  return reviews.filter(review => review.bookId === bookId);\n};\n\nexport const getUserById = async (id: string): Promise<User | undefined> => {\n  await new Promise(resolve => setTimeout(resolve, 100));\n  return users.find(user => user.id === id);\n};\n\nexport const getAverageRating = (bookId: string): number => {\n    const bookReviews = reviews.filter(review => review.bookId === bookId);\n    if (bookReviews.length === 0) return 0;\n    const totalRating = bookReviews.reduce((acc, review) => acc + review.rating, 0);\n    const average = totalRating / bookReviews.length;\n    // Round to one decimal place\n    return Math.round(average * 10) / 10;\n}\n\nexport const getGenres = async (): Promise<string[]> => {\n  const genres = books.map(book => book.genre);\n  return [...new Set(genres)];\n}\n\nexport const getBooksByUser = async (userId: string): Promise<Book[]> => {\n  await new Promise(resolve => setTimeout(resolve, 200));\n  return books.filter(book => book.addedBy === userId);\n};\n\nexport const getReviewsByUser = async (userId: string): Promise<Review[]> => {\n  await new Promise(resolve => setTimeout(resolve, 200));\n  return reviews.filter(review => review.userId === userId);\n};\n\n// In a real app, these would be API calls to a backend to mutate data.\nexport const addBook = async (book: Omit<Book, 'id'>): Promise<Book> => {\n  console.log('Adding book:', book);\n  const newBook = { ...book, id: String(Date.now()) };\n  books.unshift(newBook);\n  return newBook;\n};\n\nexport const updateBook = async (book: Book): Promise<Book> => {\n  console.log('Updating book:', book);\n  const index = books.findIndex(b => b.id === book.id);\n  if (index !== -1) {\n    books[index] = book;\n  }\n  return book;\n};\n\nexport const deleteBook = async (id: string): Promise<void> => {\n  console.log('Deleting book:', id);\n  const index = books.findIndex(b => b.id === id);\n  if (index !== -1) {\n    books.splice(index, 1);\n  }\n};\n\nexport const addReview = async (review: Omit<Review, 'id' | 'createdAt'>): Promise<Review> => {\n    const existingReview = reviews.find(r => r.bookId === review.bookId && r.userId === review.userId);\n    if (existingReview) {\n        throw new Error(\"You have already reviewed this book.\");\n    }\n    console.log('Adding review:', review);\n    const newReview = { ...review, id: String(Date.now()), createdAt: new Date().toISOString().split('T')[0] };\n    reviews = [newReview, ...reviews];\n    return newReview;\n}\n\nexport const updateReview = async (review: Review): Promise<Review> => {\n    console.log('Updating review:', review);\n    const index = reviews.findIndex(r => r.id === review.id);\n    if (index !== -1) {\n        reviews[index] = review;\n    }\n    return review;\n}\n\nexport const deleteReview = async (id: string): Promise<void> => {\n    console.log('Deleting review:', id);\n    const index = reviews.findIndex(r => r.id === id);\n    if (index !== -1) {\n        reviews.splice(index, 1);\n    }\n}\n\n\nexport const updateUser = async (user: User): Promise<User> => {\n  console.log('Updating user:', user);\n  const index = users.findIndex(u => u.id === user.id);\n  if (index !== -1) {\n    users[index] = { ...users[index], ...user };\n    return users[index];\n  }\n  // In a real app, you'd probably throw an error.\n  // For this demo, we'll add the user if they don't exist.\n  users.push(user);\n  return user;\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1091, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/books/BookDetailsClient.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/books/BookDetailsClient.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/books/BookDetailsClient.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA8S,GAC3U,4EACA","debugId":null}},
    {"offset": {"line": 1105, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/books/BookDetailsClient.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/books/BookDetailsClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/books/BookDetailsClient.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA0R,GACvT,wDACA","debugId":null}},
    {"offset": {"line": 1119, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 1129, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/books/%5Bid%5D/page.tsx"],"sourcesContent":["import { getBookById, getReviewsForBook, getAverageRating, getUserById } from \"@/lib/data\";\nimport { notFound } from \"next/navigation\";\nimport type { Metadata } from 'next';\nimport BookDetailsClient from \"@/components/books/BookDetailsClient\";\n \ntype Props = {\n  params: { id: string }\n}\n \nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const id = params.id\n  const book = await getBookById(id)\n \n  return {\n    title: book ? `${book.title} by ${book.author}` : 'Book Not Found',\n  }\n}\n\nexport default async function BookDetailsPage({ params }: { params: { id: string } }) {\n  const book = await getBookById(params.id);\n\n  if (!book) {\n    notFound();\n  }\n\n  const initialReviews = await getReviewsForBook(book.id);\n  const initialAverageRating = getAverageRating(book.id);\n  const addedByUser = await getUserById(book.addedBy);\n  \n  const reviewsWithUser = await Promise.all(initialReviews.map(async (review) => {\n    const user = await getUserById(review.userId);\n    return { ...review, user: user || null };\n  }));\n\n  return (\n    <BookDetailsClient \n      book={book} \n      initialReviews={reviewsWithUser} \n      initialAverageRating={initialAverageRating}\n      addedByUser={addedByUser ?? null}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAEA;;;;;AAMO,eAAe,iBAAiB,EAAE,MAAM,EAAS;IACtD,MAAM,KAAK,OAAO,EAAE;IACpB,MAAM,OAAO,MAAM,CAAA,GAAA,kHAAA,CAAA,cAAW,AAAD,EAAE;IAE/B,OAAO;QACL,OAAO,OAAO,GAAG,KAAK,KAAK,CAAC,IAAI,EAAE,KAAK,MAAM,EAAE,GAAG;IACpD;AACF;AAEe,eAAe,gBAAgB,EAAE,MAAM,EAA8B;IAClF,MAAM,OAAO,MAAM,CAAA,GAAA,kHAAA,CAAA,cAAW,AAAD,EAAE,OAAO,EAAE;IAExC,IAAI,CAAC,MAAM;QACT,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD;IACT;IAEA,MAAM,iBAAiB,MAAM,CAAA,GAAA,kHAAA,CAAA,oBAAiB,AAAD,EAAE,KAAK,EAAE;IACtD,MAAM,uBAAuB,CAAA,GAAA,kHAAA,CAAA,mBAAgB,AAAD,EAAE,KAAK,EAAE;IACrD,MAAM,cAAc,MAAM,CAAA,GAAA,kHAAA,CAAA,cAAW,AAAD,EAAE,KAAK,OAAO;IAElD,MAAM,kBAAkB,MAAM,QAAQ,GAAG,CAAC,eAAe,GAAG,CAAC,OAAO;QAClE,MAAM,OAAO,MAAM,CAAA,GAAA,kHAAA,CAAA,cAAW,AAAD,EAAE,OAAO,MAAM;QAC5C,OAAO;YAAE,GAAG,MAAM;YAAE,MAAM,QAAQ;QAAK;IACzC;IAEA,qBACE,8OAAC,gJAAA,CAAA,UAAiB;QAChB,MAAM;QACN,gBAAgB;QAChB,sBAAsB;QACtB,aAAa,eAAe;;;;;;AAGlC","debugId":null}}]
}